<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIオンラインスクール - 主婦のためのAI活用術</title>
    
    <!-- CSS ファイルの読み込み -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/animations.css">
    
    <!-- プリロード設定 -->
    <link rel="preload" href="scripts/main.js" as="script">
    <link rel="preload" href="scripts/storage.js" as="script">
    
    <!-- PWA設定 -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff7b9a">
    
    <!-- Open Graph設定 -->
    <meta property="og:title" content="AIオンラインスクール - 主婦のためのAI活用術">
    <meta property="og:description" content="9章91本の動画で基礎から応用まで。あなたのペースで学べるAIスクール">
    <meta property="og:image" content="assets/images/og-image.jpg">
    
    <!-- アイコン設定 -->
    <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
</head>
<body>
    <!-- ローディング画面 -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner">🌸</div>
            <p>AIスクールを準備中...</p>
        </div>
    </div>

    <!-- ヘッダー -->
    <header class="header" id="main-header">
        <div class="header-content">
            <a href="#" class="logo" onclick="App.showPage('home')">
                <span class="logo-icon">🌸</span>
                <span class="logo-text">AIオンラインスクール</span>
            </a>
            <div class="progress-indicator">
                <span id="progress-text">32/91本完了</span>
            </div>
        </div>
        <!-- プログレスバー -->
        <div class="global-progress-bar">
            <div class="progress-fill" id="global-progress-fill"></div>
        </div>
    </header>

    <!-- メインコンテナ -->
    <main class="main-container" id="main-container">
        <!-- トップページ -->
        <div id="home" class="page active">
            <section class="hero-section">
                <div class="hero-background"></div>
                <div class="hero-content">
                    <h1 class="hero-title animate-fade-in">主婦のためのAI活用術</h1>
                    <p class="hero-subtitle animate-fade-in-delay">9章91本の動画で基礎から応用まで<br>あなたのペースで学べます</p>
                    <button class="btn btn-primary animate-bounce" onclick="App.showPage('lessons')">
                        <span class="btn-icon">✨</span>
                        今すぐ学習を始める
                    </button>
                </div>
                <div class="hero-decoration">
                    <div class="floating-icon">🤖</div>
                    <div class="floating-icon">💡</div>
                    <div class="floating-icon">📱</div>
                </div>
            </section>

            <div class="card progress-overview-card" data-animate="slide-up">
                <div class="progress-circle-container">
                    <svg class="progress-circle" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="45" class="progress-bg"></circle>
                        <circle cx="50" cy="50" r="45" class="progress-bar" id="home-progress-circle"></circle>
                    </svg>
                    <div class="progress-center">
                        <span class="progress-percentage" id="home-progress-text">35%</span>
                        <span class="progress-label">完了</span>
                    </div>
                </div>
                <div class="progress-info">
                    <h3>学習進捗</h3>
                    <p>現在 第2章を学習中です</p>
                    <div class="progress-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="study-days">5</span>
                            <span class="stat-label">日目</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="study-time">45</span>
                            <span class="stat-label">分</span>
                        </div>
                    </div>
                    <button class="btn btn-outline" onclick="App.showPage('progress')">
                        進捗を詳しく見る
                    </button>
                </div>
            </div>

            <div class="card learning-flow-card" data-animate="slide-up-delay">
                <h3 class="card-title">
                    <span class="title-icon">🌟</span>
                    学習の流れ
                </h3>
                <div class="learning-flow">
                    <div class="flow-step completed" data-step="1">
                        <div class="step-icon">👋</div>
                        <div class="step-content">
                            <h4>オリエンテーション</h4>
                            <p>まずは基本的な使い方から</p>
                            <div class="step-progress">3/5本完了</div>
                        </div>
                        <div class="step-status">✓</div>
                    </div>
                    <div class="flow-step current" data-step="2">
                        <div class="step-icon">🧠</div>
                        <div class="step-content">
                            <h4>AI基礎知識</h4>
                            <p>AIって何？から丁寧に</p>
                            <div class="step-progress">2/8本完了</div>
                        </div>
                        <div class="step-status">📚</div>
                    </div>
                    <div class="flow-step" data-step="3">
                        <div class="step-icon">✨</div>
                        <div class="step-content">
                            <h4>実践活用</h4>
                            <p>日常生活で使ってみよう</p>
                            <div class="step-progress">0/12本</div>
                        </div>
                        <div class="step-status">⏳</div>
                    </div>
                </div>
            </div>

            <div class="action-cards">
                <div class="action-card" onclick="App.showPage('lessons')" data-animate="slide-left">
                    <div class="action-icon">📚</div>
                    <h4>レッスン一覧</h4>
                    <p>全ての動画を見る</p>
                </div>
                <div class="action-card" onclick="App.continueLesson()" data-animate="slide-right">
                    <div class="action-icon">▶️</div>
                    <h4>続きから</h4>
                    <p>前回の続きを学習</p>
                </div>
            </div>
        </div>

        <!-- レッスン一覧ページ -->
        <div id="lessons" class="page">
            <div class="page-header">
                <button class="back-btn" onclick="App.showPage('home')">
                    <span class="back-icon">←</span>
                </button>
                <h2 class="page-title">レッスン一覧</h2>
                <div class="header-actions">
                    <button class="search-toggle" onclick="UI.toggleSearch()">🔍</button>
                </div>
            </div>

            <!-- 検索機能 -->
            <div class="search-container" id="lesson-search">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="レッスンを検索..." 
                           id="lesson-search-input" oninput="LessonManager.searchLessons()">
                    <button class="search-clear" onclick="LessonManager.clearSearch()">×</button>
                </div>
            </div>

            <!-- フィルタータブ -->
            <div class="filter-tabs">
                <button class="tab active" data-filter="all" onclick="LessonManager.filterLessons('all')">
                    すべて
                </button>
                <button class="tab" data-filter="incomplete" onclick="LessonManager.filterLessons('incomplete')">
                    未視聴 <span class="filter-count" id="incomplete-count">59</span>
                </button>
                <button class="tab" data-filter="complete" onclick="LessonManager.filterLessons('complete')">
                    視聴済み <span class="filter-count" id="complete-count">32</span>
                </button>
            </div>

            <!-- レッスンリスト -->
            <div class="lessons-container" id="lessons-container">
                <!-- Chapter 1 -->
                <div class="chapter-accordion" data-chapter="1">
                    <div class="chapter-header" onclick="UI.toggleChapter(1)">
                        <div class="chapter-info">
                            <h3 class="chapter-title">第1章 オリエンテーション</h3>
                            <div class="chapter-progress">
                                <span class="progress-text">3/5本完了</span>
                                <div class="mini-progress-bar">
                                    <div class="mini-progress-fill" style="width: 60%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="chapter-toggle">
                            <span class="chapter-arrow" id="chapter1-arrow">▼</span>
                        </div>
                    </div>
                    <div class="chapter-content active" id="chapter1-content">
                        <div class="lesson-item completed" data-lesson="1-1" onclick="App.showLesson('1-1')">
                            <div class="lesson-status">
                                <span class="status-icon">✅</span>
                            </div>
                            <div class="lesson-info">
                                <h4 class="lesson-title">1-1 ようこそAIスクールへ</h4>
                                <div class="lesson-meta">
                                    <span class="lesson-duration">5分</span>
                                    <span class="lesson-difficulty">初級</span>
                                </div>
                            </div>
                            <div class="lesson-actions">
                                <button class="play-btn" onclick="event.stopPropagation(); App.showLesson('1-1')">
                                    ▶️
                                </button>
                            </div>
                        </div>

                        <div class="lesson-item completed" data-lesson="1-2" onclick="App.showLesson('1-2')">
                            <div class="lesson-status">
                                <span class="status-icon">✅</span>
                            </div>
                            <div class="lesson-info">
                                <h4 class="lesson-title">1-2 学習の進め方</h4>
                                <div class="lesson-meta">
                                    <span class="lesson-duration">8分</span>
                                    <span class="lesson-difficulty">初級</span>
                                </div>
                            </div>
                            <div class="lesson-actions">
                                <button class="play-btn" onclick="event.stopPropagation(); App.showLesson('1-2')">
                                    ▶️
                                </button>
                            </div>
                        </div>

                        <div class="lesson-item current" data-lesson="1-4" onclick="App.showLesson('1-4')">
                            <div class="lesson-status">
                                <span class="status-icon current-icon">📍</span>
                            </div>
                            <div class="lesson-info">
                                <h4 class="lesson-title">1-4 実践前の準備</h4>
                                <div class="lesson-meta">
                                    <span class="lesson-duration">7分</span>
                                    <span class="lesson-difficulty">初級</span>
                                    <span class="next-lesson">← 次はココ!</span>
                                </div>
                            </div>
                            <div class="lesson-actions">
                                <button class="play-btn primary" onclick="event.stopPropagation(); App.showLesson('1-4')">
                                    ▶️
                                </button>
                            </div>
                        </div>

                        <div class="lesson-item" data-lesson="1-5" onclick="App.showLesson('1-5')">
                            <div class="lesson-status">
                                <span class="status-icon">⚪</span>
                            </div>
                            <div class="lesson-info">
                                <h4 class="lesson-title">1-5 質問の仕方</h4>
                                <div class="lesson-meta">
                                    <span class="lesson-duration">6分</span>
                                    <span class="lesson-difficulty">初級</span>
                                </div>
                            </div>
                            <div class="lesson-actions">
                                <button class="play-btn" onclick="event.stopPropagation(); App.showLesson('1-5')">
                                    ▶️
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chapter 2 -->
                <div class="chapter-accordion" data-chapter="2">
                    <div class="chapter-header" onclick="UI.toggleChapter(2)">
                        <div class="chapter-info">
                            <h3 class="chapter-title">第2章 AI基礎知識</h3>
                            <div class="chapter-progress">
                                <span class="progress-text">2/8本完了</span>
                                <div class="mini-progress-bar">
                                    <div class="mini-progress-fill" style="width: 25%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="chapter-toggle">
                            <span class="chapter-arrow" id="chapter2-arrow">▶</span>
                        </div>
                    </div>
                    <div class="chapter-content" id="chapter2-content">
                        <!-- レッスン項目は省略 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- レッスン詳細ページ -->
        <div id="lesson-detail" class="page">
            <div class="page-header">
                <button class="back-btn" onclick="App.showPage('lessons')">
                    <span class="back-icon">←</span>
                </button>
                <div class="lesson-header-info">
                    <h2 class="lesson-title" id="current-lesson-title">1-4 実践前の準備</h2>
                    <div class="lesson-progress-info">
                        <span id="lesson-progress-text">進捗 32/91</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="bookmark-btn" onclick="LessonManager.toggleBookmark()">
                        <span id="bookmark-icon">🤍</span>
                    </button>
                </div>
            </div>

            <!-- 動画プレーヤー -->
            <div class="video-section">
                <div class="video-container">
                    <div class="video-placeholder" id="video-player">
                        <div class="video-play-button" onclick="VideoPlayer.play()">
                            <span class="play-icon">▶️</span>
                        </div>
                        <div class="video-info">
                            <p>🎥 YouTube動画プレーヤー</p>
                            <small>実際の実装ではYouTube埋め込み</small>
                        </div>
                    </div>
                </div>
                <div class="video-controls">
                    <button class="control-btn" onclick="VideoPlayer.toggleSpeed()">
                        <span id="speed-indicator">1.0x</span>
                    </button>
                    <button class="control-btn" onclick="VideoPlayer.toggleSubtitles()">
                        字幕
                    </button>
                    <button class="control-btn" onclick="VideoPlayer.toggleFullscreen()">
                        全画面
                    </button>
                </div>
            </div>

            <!-- レッスン情報 -->
            <div class="lesson-info-card card">
                <div class="card-header">
                    <h3>📋 このレッスンで学ぶこと</h3>
                </div>
                <div class="card-content">
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">学習目標</span>
                            <span class="info-value">AI活用の準備ができるようになる</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">所要時間</span>
                            <span class="info-value">約7分</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">前提知識</span>
                            <span class="info-value">1-1〜1-3の内容</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">難易度</span>
                            <span class="info-value difficulty-beginner">初級</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- アクションボタン -->
            <div class="lesson-actions-section">
                <button class="btn btn-success btn-large" onclick="LessonManager.markComplete()" id="complete-btn">
                    <span class="btn-icon">✅</span>
                    視聴完了にする
                </button>
                <div class="secondary-actions">
                    <button class="btn btn-outline" onclick="UI.toggleNotes()">
                        <span class="btn-icon">📝</span>
                        メモを取る
                    </button>
                    <button class="btn btn-outline" onclick="App.showPage('progress')">
                        <span class="btn-icon">📊</span>
                        進捗を確認
                    </button>
                </div>
            </div>

            <!-- メモセクション -->
            <div class="notes-section card" id="notes-section">
                <div class="card-header">
                    <h3>💭 メモ</h3>
                    <button class="notes-close" onclick="UI.toggleNotes()">×</button>
                </div>
                <div class="card-content">
                    <textarea id="lesson-memo" 
                              class="notes-textarea" 
                              placeholder="学んだことや気づいたことをメモしてください..."></textarea>
                    <div class="notes-actions">
                        <button class="btn btn-outline btn-small" onclick="NotesManager.save()">保存</button>
                        <button class="btn btn-ghost btn-small" onclick="NotesManager.clear()">クリア</button>
                    </div>
                </div>
            </div>

            <!-- ナビゲーション -->
            <div class="lesson-navigation">
                <button class="nav-btn prev-btn" onclick="App.prevLesson()" id="prev-lesson-btn">
                    <span class="nav-icon">←</span>
                    <div class="nav-content">
                        <span class="nav-label">前のレッスン</span>
                        <span class="nav-title">1-3 AI基礎用語集</span>
                    </div>
                </button>
                <button class="nav-btn next-btn" onclick="App.nextLesson()" id="next-lesson-btn">
                    <div class="nav-content">
                        <span class="nav-label">次のレッスン</span>
                        <span class="nav-title">1-5 質問の仕方</span>
                    </div>
                    <span class="nav-icon">→</span>
                </button>
            </div>

            <!-- サポートセクション -->
            <div class="support-section card">
                <div class="card-content text-center">
                    <div class="support-icon">💬</div>
                    <h4>困った時はお気軽に</h4>
                    <p>分からないことがあれば、すぐにサポートにご相談ください</p>
                    <button class="btn btn-secondary" onclick="App.openLineSupport()">
                        <span class="btn-icon">📱</span>
                        LINEで質問する
                    </button>
                </div>
            </div>
        </div>

        <!-- 進捗ダッシュボード、FAQ、お問い合わせページは省略 -->
        <!-- ... 他のページも同様の構造で作成 ... -->
    </main>

    <!-- フッターナビゲーション -->
    <nav class="footer-nav" id="footer-nav">
        <div class="nav-container">
            <a href="#" class="nav-item active" onclick="App.showPage('home')" data-page="home">
                <span class="nav-icon">🏠</span>
                <span class="nav-label">トップ</span>
                <div class="nav-indicator"></div>
            </a>
            <a href="#" class="nav-item" onclick="App.showPage('lessons')" data-page="lessons">
                <span class="nav-icon">📚</span>
                <span class="nav-label">一覧</span>
                <div class="nav-indicator"></div>
            </a>
            <a href="#" class="nav-item" onclick="App.showPage('progress')" data-page="progress">
                <span class="nav-icon">📊</span>
                <span class="nav-label">進捗</span>
                <div class="nav-indicator"></div>
            </a>
            <a href="#" class="nav-item" onclick="App.showPage('faq')" data-page="faq">
                <span class="nav-icon">❓</span>
                <span class="nav-label">FAQ</span>
                <div class="nav-indicator"></div>
            </a>
        </div>
    </nav>

    <!-- フローティングアクションボタン -->
    <button class="fab" onclick="App.continueLesson()" title="続きから学習" id="continue-fab">
        <span class="fab-icon">▶️</span>
        <div class="fab-ripple"></div>
    </button>

    <!-- トースト通知 -->
    <div class="toast-container" id="toast-container">
        <!-- 動的に生成される通知 -->
    </div>

    <!-- モーダル -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal-content" id="modal-content">
            <!-- 動的にコンテンツが挿入される -->
        </div>
    </div>

    <!-- JavaScript ファイルの読み込み -->
    <script src="scripts/utils.js"></script>
    <script src="scripts/storage.js"></script>
    <script src="scripts/video-player.js"></script>
    <script src="scripts/lesson-manager.js"></script>
    <script src="scripts/ui-manager.js"></script>
    <script src="scripts/main.js"></script>
    
    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => console.log('SW registered'))
                    .catch(error => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>